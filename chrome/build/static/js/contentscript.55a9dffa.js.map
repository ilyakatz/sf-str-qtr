{"version":3,"file":"static/js/contentscript.55a9dffa.js","mappings":"yBAcA,IAAIA,EAAc,KACdC,EAAc,KACdC,EAA0B,KASvB,SAASC,IAOb,IA0DwBC,EALCC,EA3D1BC,EAAUC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,SACbG,EAAcH,UAAAC,OAAA,EAAAD,UAAA,QAAAE,EACdE,EAAWJ,UAAAC,OAAA,EAAAD,UAAA,QAAAE,EACXG,EAAOL,UAAAC,OAAA,EAAAD,UAAA,QAAAE,EACPI,EAAQN,UAAAC,OAAA,EAAAD,UAAA,QAAAE,EACRK,EAAQP,UAAAC,OAAA,EAAAD,UAAA,QAAAE,EAZRM,QAAQC,IAAI,oBACZd,EAAgBe,OAAOC,OAAuB,eAAEC,SAChDnB,EAAcE,EAAckB,cAAc,QAC1CL,QAAQC,IAAI,gCAsBd,SAA0BV,GACxBS,QAAQC,IAAI,yBACZ,IAAMK,EAAgBnB,EAAckB,cAAc,UAClDC,EAAcC,MAAQhB,EAClBe,EAAcC,QAAUhB,EAC1BS,QAAQC,IAAI,8BAADO,OAA0BF,EAAcC,QAEnDP,QAAQC,IAAI,2CAEhB,CAnBEQ,CAAiBlB,GAuFnB,SAA8BI,GAC5B,IAAIe,EAAW,CACb,EAAG,gBACH,EAAG,aACH,EAAG,iBACH,EAAG,oBAGDC,EAAsBD,EAASf,GACnCK,QAAQC,IAAI,+BAAiCU,GAG7C,IAAIC,EAASzB,EAAc0B,iBAAiB,SACxCC,EAAuB,KAO3B,GANAF,EAAOG,SAAQ,SAAUC,GACnBA,EAAMC,YAAYC,SAAS,uBAC7BJ,EAAuBE,EAE3B,IAEIF,EAAsB,CAExB,IAAIK,EAAwBL,EACzBM,QAAQ,aACRf,cAAc,UAEbc,GAEFA,EAAsBZ,MAAQI,EAE1BQ,EAAsBZ,QAAUG,EAASf,GAC3CK,QAAQC,IAAI,iCAADO,OAA6Bb,IAExCK,QAAQC,IAAI,+CAADO,OACiCW,EAAsBZ,SAIpEP,QAAQC,IAAI,kCAEhB,MACED,QAAQC,IAAI,iCAEhB,CAjIEoB,CAAqB1B,GA4DvB,SAAwBC,GACGV,EAAY,qCAClBoC,QAAQ,aAAaC,KAAK,SAASC,IAAI5B,EAC5D,CA9DE6B,CAAe7B,GAsDUP,EArDPQ,EAsDAX,EAAY,oCAClBoC,QAAQ,aAAaC,KAAK,SAASC,IAAInC,GAPzBC,EA/CPQ,EAgDAZ,EAAY,qCAClBoC,QAAQ,aAAaC,KAAK,SAASC,IAAIlC,GAnBtD,WACEU,QAAQC,IAAI,4BACZ,IAGMyB,EAHmBzC,EAAYoB,cACnC,mCAEqCsB,cAActB,cAAc,UAC7DuB,EAAyBF,EAAcb,iBAAiB,UAC1DgB,EAAU,KACdD,EAAuBb,SAAQ,SAACe,GACT,KAAjBA,EAAOvB,QACTsB,EAAUC,EAAOvB,MAErB,IACAmB,EAAcnB,MAAQsB,EACtB7B,QAAQC,IAAI,yBAADO,OAAqBqB,GAClC,CA5CEE,GAgBF,SAA+BhC,GAC7B,IAGMiC,EAHe7C,EAAcoC,MACjC,SAACP,GAAK,MAAyB,gBAApBA,EAAMiB,SAA2B,IAEVN,cAActB,cAAc,SAChE2B,EAAezB,MAAQR,EACnBiC,EAAezB,QAAUR,EAC3BC,QAAQC,IAAI,4BAADO,OAAwBT,IAEnCC,QAAQC,IAAI,yCAEhB,CA1BEiC,CAAsBnC,GA+HHb,EAAY,2BA7HjC,CCzBAiD,OAAOC,QAAQC,UAAUC,aAEvB,SAACC,EAAmCC,EAAQC,GAC1C,IAAMC,EAAWH,EAAQI,KACzBvD,EACEsD,EAAS,GAAGnD,WACZmD,EAAS,GAAG/C,eACZ+C,EAAS,GAAG9C,YACZ8C,EAAS,GAAG7C,QAAU6C,EAAS,GAAG9C,YAClC8C,EAAS,GAAG5C,SAAW4C,EAAS,GAAG9C,YACnC8C,EAAS,GAAG3C,SAEhB,G","sources":["FilloutForm.js","contentscript.ts"],"sourcesContent":["// Copyright 2023 ilya\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nlet formElement = null;\nvar $formJquery = null;\nlet specificFrame: document = null;\n\nfunction setupContext() {\n  console.log(`Updating context`);\n  specificFrame = window.frames[\"ACADialogFrame\"].document;\n  formElement = specificFrame.querySelector(\"form\");\n  console.log(`✅ Updated frame context`);\n}\n\nexport function fillOutForm(\n  typeOfStay = \"Hosted\",\n  currentQuarter,\n  currentYear,\n  checkIn,\n  checkOut,\n  airbnbId\n) {\n  setupContext();\n  updateTypeOfStay(typeOfStay);\n  updateCurrentQuarter(currentQuarter);\n  setCurrentYear(currentYear);\n  updateCheckinDate(checkIn);\n  updateCheckoutDate(checkOut);\n  selectAirbnb();\n  updateAirbnbListingId(airbnbId);\n  submitForm();\n}\n\nfunction updateTypeOfStay(typeOfStay) {\n  console.log(`Updating type of stay`);\n  const selectElement = specificFrame.querySelector(\"select\");\n  selectElement.value = typeOfStay;\n  if (selectElement.value === typeOfStay) {\n    console.log(`✅ Type of stay set to ${selectElement.value}`);\n  } else {\n    console.log(`❌ Type of stay is not set correctly`);\n  }\n}\n\nfunction updateAirbnbListingId(airbnbId) {\n  const labelElement = specificFrame.find(\n    (label) => label.innerText === \"Listing ID:\"\n  );\n  const listingIdInput = labelElement.parentElement.querySelector(\"input\");\n  listingIdInput.value = airbnbId;\n  if (listingIdInput.value === airbnbId) {\n    console.log(`✅ Listing id set to ${airbnbId}`);\n  } else {\n    console.log(`❌ Listing id is not set correctly`);\n  }\n}\n\nfunction selectAirbnb() {\n  console.log(`Selecting Airbnb service`);\n  const serviceNameLabel = formElement.querySelector(\n    'label:contains(\"Service Name:\")'\n  );\n  const serviceSelect = serviceNameLabel.parentElement.querySelector(\"select\");\n  const serviceDropdownOptions = serviceSelect.querySelectorAll(\"option\");\n  let service = null;\n  serviceDropdownOptions.forEach((option) => {\n    if (option.value !== \"\") {\n      service = option.value;\n    }\n  });\n  serviceSelect.value = service;\n  console.log(`✅ Service set to ${service}`);\n}\n\nfunction updateCheckoutDate(checkOutDate) {\n  var checkoutDate = $formJquery('label:contains(\"Check Out Date:\")');\n  checkoutDate.parents(\".ACA_Form\").find(\"input\").val(checkOutDate);\n}\n\nfunction updateCheckinDate(checkInDate) {\n  var checkinDate = $formJquery('label:contains(\"Check In Date:\")');\n  checkinDate.parents(\".ACA_Form\").find(\"input\").val(checkInDate);\n}\n\nfunction setCurrentYear(currentYear) {\n  var reportingYearLabel = $formJquery('label:contains(\"Reporting Year:\")');\n  reportingYearLabel.parents(\".ACA_Form\").find(\"input\").val(currentYear);\n}\n\n// function updateCurrentQuarter(currentQuarter) {\n//   var quarters = {\n//     1: \"January-March\",\n//     2: \"April-June\",\n//     3: \"July-September\",\n//     4: \"October-December\",\n//   };\n\n//   var currentQuarterValue = quarters[currentQuarter];\n//   console.log(\"Updating current quarter to \" + currentQuarterValue);\n//   var reportingPeriodLabel = $formJquery('label:contains(\"Reporting Period:\")');\n//   var reportingPeriodSelect = reportingPeriodLabel\n//         .parents(\".ACA_Form\")\n//         .find(\"select\");\n//   reportingPeriodSelect.val(currentQuarterValue);\n//   if (reportingPeriodSelect.val() === quarters[currentQuarter]) {\n//     console.log(`✅ listing id set to ${currentQuarter}`);\n//   } else {\n//     console.log(`❌ listing id is not set correctly ${reportingPeriodSelect.val()}`);\n//   }\n// }\nfunction updateCurrentQuarter(currentQuarter) {\n  var quarters = {\n    1: \"January-March\",\n    2: \"April-June\",\n    3: \"July-September\",\n    4: \"October-December\",\n  };\n\n  var currentQuarterValue = quarters[currentQuarter];\n  console.log(\"Updating current quarter to \" + currentQuarterValue);\n\n  // Find the label element\n  var labels = specificFrame.querySelectorAll(\"label\");\n  var reportingPeriodLabel = null;\n  labels.forEach(function (label) {\n    if (label.textContent.includes(\"Reporting Period:\")) {\n      reportingPeriodLabel = label;\n    }\n  });\n\n  if (reportingPeriodLabel) {\n    // Find the select element\n    var reportingPeriodSelect = reportingPeriodLabel\n      .closest(\".ACA_Form\")\n      .querySelector(\"select\");\n\n    if (reportingPeriodSelect) {\n      // Set the value of the select element\n      reportingPeriodSelect.value = currentQuarterValue;\n\n      if (reportingPeriodSelect.value === quarters[currentQuarter]) {\n        console.log(`✅ Current quarter set to ${currentQuarter}`);\n      } else {\n        console.log(\n          `❌ Current quarter is not set correctly ${reportingPeriodSelect.value}`\n        );\n      }\n    } else {\n      console.log(`❌ Select element not found`);\n    }\n  } else {\n    console.log(`❌ Label element not found`);\n  }\n}\n\nfunction submitForm() {\n  var submitButton = $formJquery(\"#ctl00_phPopup_btnSubmit\");\n  //   submitButton.click(function (res) {\n  //     // Check if the click was successful\n  //     if (true) {\n  //       console.log(`✅ forms submitted`);\n  //     } else {\n  //       console.log(`❌ form could not be submitted`);\n  //     }\n  //   });\n  //   submitButton.trigger(\"click\");\n}\n\n/* ============= Run the scripts ============ */\n// const currentQuarter = 3;\n// const currentYear = 2023;\n// const airbnbId = \"49043049\";\n// const checkIn = \"08/25/\" + currentYear;\n// const checkOut = \"09/01/\" + currentYear;\n// const typeOfStay = \"Hosted\";\n\n// fillOutForm(\n//   typeOfStay,\n//   currentQuarter,\n//   currentYear,\n//   checkIn,\n//   checkOut,\n//   airbnbId\n// );\n","// Copyright 2023 ilya\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { fillOutForm } from \"./FilloutForm\";\n\n// @ts-ignore\nchrome.runtime.onMessage.addListener(\n  // @ts-ignore\n  (message: { data: FormDataItem[] }, sender, sendResponse) => {\n    const formData = message.data;\n    fillOutForm(\n      formData[0].typeOfStay,\n      formData[0].currentQuarter,\n      formData[0].currentYear,\n      formData[0].checkIn + formData[0].currentYear,\n      formData[0].checkOut + formData[0].currentYear,\n      formData[0].airbnbId\n    );\n  }\n);\n"],"names":["formElement","$formJquery","specificFrame","fillOutForm","checkInDate","checkOutDate","typeOfStay","arguments","length","undefined","currentQuarter","currentYear","checkIn","checkOut","airbnbId","console","log","window","frames","document","querySelector","selectElement","value","concat","updateTypeOfStay","quarters","currentQuarterValue","labels","querySelectorAll","reportingPeriodLabel","forEach","label","textContent","includes","reportingPeriodSelect","closest","updateCurrentQuarter","parents","find","val","setCurrentYear","serviceSelect","parentElement","serviceDropdownOptions","service","option","selectAirbnb","listingIdInput","innerText","updateAirbnbListingId","chrome","runtime","onMessage","addListener","message","sender","sendResponse","formData","data"],"sourceRoot":""}