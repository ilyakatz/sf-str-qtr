{"version":3,"file":"static/js/contentscript.78e9b366.js","mappings":"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","sources":["FilloutForm.js","contentscript.ts"],"sourcesContent":["// Copyright 2023 ilya\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nlet formElement = null;\nvar $formJquery = null;\nlet specificFrame: document = null;\n\nfunction setupContext() {\n  console.log(`Updating context`);\n  specificFrame = window.frames[\"ACADialogFrame\"].document;\n  formElement = specificFrame.querySelector(\"form\");\n  console.log(`✅ Updated frame context`);\n}\n\nexport function fillOutForm(\n  typeOfStay = \"Hosted\",\n  currentQuarter,\n  currentYear,\n  checkIn,\n  checkOut,\n  airbnbId\n) {\n  setupContext();\n  updateTypeOfStay(typeOfStay);\n  updateCurrentQuarter(currentQuarter);\n  setCurrentYear(currentYear);\n  updateCheckinDate(checkIn);\n  updateCheckoutDate(checkOut);\n  selectAirbnb();\n  updateAirbnbListingId(airbnbId);\n  submitForm();\n}\n\nfunction updateTypeOfStay(typeOfStay) {\n  console.log(`Updating type of stay`);\n  const selectElement = specificFrame.querySelector(\"select\");\n  selectElement.value = typeOfStay;\n  if (selectElement.value === typeOfStay) {\n    console.log(`✅ Type of stay set to ${selectElement.value}`);\n  } else {\n    console.log(`❌ Type of stay is not set correctly`);\n  }\n}\n\nfunction updateAirbnbListingId(airbnbId) {\n  const labelElement = specificFrame.find(\n    (label) => label.innerText === \"Listing ID:\"\n  );\n  const listingIdInput = labelElement.parentElement.querySelector(\"input\");\n  listingIdInput.value = airbnbId;\n  if (listingIdInput.value === airbnbId) {\n    console.log(`✅ Listing id set to ${airbnbId}`);\n  } else {\n    console.log(`❌ Listing id is not set correctly`);\n  }\n}\n\n// function selectAirbnb() {\n//   var serviceLabel = $formJquery('label:contains(\"Service Name:\")');\n//   var serviceSelect = serviceLabel.parents(\".ACA_Form\").find(\"select\");\n//   var serviceDropdownValues = [];\n//   $formJquery(serviceSelect)\n//     .find(\"option\")\n//     .each(function () {\n//       var value = $formJquery(this).val();\n//       if (value !== \"\") {\n//         serviceDropdownValues.push(value);\n//       }\n//     });\n//   var service = serviceDropdownValues[0];\n//   serviceSelect.val(service);\n//   console.log(`✅ service set to  ${service}`);\n// }\n\nfunction selectAirbnb() {\n  console.log(`Selecting Airbnb service`);\n\n  // Find the label element\n  var labels = specificFrame.querySelectorAll('label');\n  var serviceLabel = null;\n  var regex = /^Service Name/;\n  labels.forEach(function (label) {\n    if (regex.test(label.textContent)) {\n      serviceLabel = label;\n    }\n  });\n\n  if (serviceLabel) {\n    // Find the parent element with class \"ACA_Form\"\n    var parentACAForm = serviceLabel.closest(\".ACA_Form\");\n\n    if (parentACAForm) {\n      // Find the select element within the parent element\n      var serviceSelect = parentACAForm.querySelector(\"select\");\n\n      if (serviceSelect) {\n        // Create an array for storing select options values\n        var serviceDropdownValues = [];\n\n        // Iterate through the option elements\n        serviceSelect.querySelectorAll(\"option\").forEach(function (option) {\n          var value = option.value;\n          if (value !== \"\") {\n            serviceDropdownValues.push(value);\n          }\n        });\n\n        if (serviceDropdownValues.length > 0) {\n          var service = serviceDropdownValues[0];\n\n          // Set the value of the select element\n          serviceSelect.value = service;\n          console.log(`✅ Service set to ${service}`);\n        } else {\n          console.log(`❌ No valid service values found`);\n        }\n      } else {\n        console.log(`❌ Select element not found within .ACA_Form`);\n      }\n    } else {\n      console.log(`❌ .ACA_Form parent element not found`);\n    }\n  } else {\n    console.log(`❌ Label element not found`);\n  }\n}\n\n\nfunction updateCheckoutDate(checkOutDate) {\n  if (updateDate(\"Check Out Date:\", checkOutDate)) {\n    console.log(`✅ Check Out Date updated successfully`);\n  } else {\n    console.log(`❌ Check Out Date update failed`);\n  }\n}\n\nfunction updateCheckinDate(checkInDate) {\n  if (updateDate(\"Check In Date:\", checkInDate)) {\n    console.log(`✅ Check In Date updated successfully`);\n  } else {\n    console.log(`❌ Check In Date update failed`);\n  }\n}\n\nfunction updateDate(labelText, dateValue) {\n  // Find the label element\n  var labels = specificFrame.querySelectorAll('label');\n  var dateLabel = null;\n  labels.forEach(function (label) {\n    if (label.textContent.includes(labelText)) {\n      dateLabel = label;\n    }\n  });\n\n  if (dateLabel) {\n    // Find the input element\n    var dateInput = dateLabel.closest(\".ACA_Form\").querySelector(\"input\");\n\n    if (dateInput) {\n      // Set the value of the input element\n      dateInput.value = dateValue;\n      return true; // Operation succeeded\n    } else {\n      console.log(`❌ Input element not found for ${labelText}`);\n    }\n  } else {\n    console.log(`❌ Label element not found for ${labelText}`);\n  }\n  return false; // Operation failed\n}\n\nfunction setCurrentYear(currentYear) {\n  // Find the label element\n  var labels = specificFrame.querySelectorAll('label');\n  var reportingYearLabel = null;\n  labels.forEach(function (label) {\n    if (label.textContent.includes(\"Reporting Year:\")) {\n      reportingYearLabel = label;\n    }\n  });\n\n  if (reportingYearLabel) {\n    // Find the input element\n    var reportingYearInput = reportingYearLabel.closest(\".ACA_Form\").querySelector(\"input\");\n\n    if (reportingYearInput) {\n      // Set the value of the input element\n      reportingYearInput.value = currentYear;\n    } else {\n      console.log(`❌ Input element not found`);\n    }\n  } else {\n    console.log(`❌ Label element not found`);\n  }\n}\n\nfunction updateCurrentQuarter(currentQuarter) {\n  var quarters = {\n    1: \"January-March\",\n    2: \"April-June\",\n    3: \"July-September\",\n    4: \"October-December\",\n  };\n\n  var currentQuarterValue = quarters[currentQuarter];\n  console.log(\"Updating current quarter to \" + currentQuarterValue);\n\n  // Find the label element\n  var labels = specificFrame.querySelectorAll(\"label\");\n  var reportingPeriodLabel = null;\n  labels.forEach(function (label) {\n    if (label.textContent.includes(\"Reporting Period:\")) {\n      reportingPeriodLabel = label;\n    }\n  });\n\n  if (reportingPeriodLabel) {\n    // Find the select element\n    var reportingPeriodSelect = reportingPeriodLabel\n      .closest(\".ACA_Form\")\n      .querySelector(\"select\");\n\n    if (reportingPeriodSelect) {\n      // Set the value of the select element\n      reportingPeriodSelect.value = currentQuarterValue;\n\n      if (reportingPeriodSelect.value === quarters[currentQuarter]) {\n        console.log(`✅ Current quarter set to ${currentQuarter}`);\n      } else {\n        console.log(\n          `❌ Current quarter is not set correctly ${reportingPeriodSelect.value}`\n        );\n      }\n    } else {\n      console.log(`❌ Select element not found`);\n    }\n  } else {\n    console.log(`❌ Label element not found`);\n  }\n}\n\nfunction submitForm() {\n  var submitButton = $formJquery(\"#ctl00_phPopup_btnSubmit\");\n  //   submitButton.click(function (res) {\n  //     // Check if the click was successful\n  //     if (true) {\n  //       console.log(`✅ forms submitted`);\n  //     } else {\n  //       console.log(`❌ form could not be submitted`);\n  //     }\n  //   });\n  //   submitButton.trigger(\"click\");\n}\n\n/* ============= Run the scripts ============ */\n// const currentQuarter = 3;\n// const currentYear = 2023;\n// const airbnbId = \"49043049\";\n// const checkIn = \"08/25/\" + currentYear;\n// const checkOut = \"09/01/\" + currentYear;\n// const typeOfStay = \"Hosted\";\n\n// fillOutForm(\n//   typeOfStay,\n//   currentQuarter,\n//   currentYear,\n//   checkIn,\n//   checkOut,\n//   airbnbId\n// );\n","// Copyright 2023 ilya\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { fillOutForm } from \"./FilloutForm\";\n\n// @ts-ignore\nchrome.runtime.onMessage.addListener(\n  // @ts-ignore\n  (message: { data: FormDataItem[] }, sender, sendResponse) => {\n    const formData = message.data;\n    fillOutForm(\n      formData[0].typeOfStay,\n      formData[0].currentQuarter,\n      formData[0].currentYear,\n      formData[0].checkIn + formData[0].currentYear,\n      formData[0].checkOut + formData[0].currentYear,\n      formData[0].airbnbId\n    );\n  }\n);\n"],"names":["$formJquery","specificFrame","fillOutForm","typeOfStay","arguments","length","undefined","currentQuarter","currentYear","checkIn","checkOut","airbnbId","console","log","window","frames","document","querySelector","selectElement","value","concat","updateTypeOfStay","quarters","currentQuarterValue","labels","querySelectorAll","reportingPeriodLabel","forEach","label","textContent","includes","reportingPeriodSelect","closest","updateCurrentQuarter","reportingYearLabel","reportingYearInput","setCurrentYear","updateDate","serviceLabel","regex","test","parentACAForm","serviceSelect","serviceDropdownValues","option","push","service","selectAirbnb","listingIdInput","find","innerText","parentElement","updateAirbnbListingId","labelText","dateValue","dateLabel","dateInput","chrome","runtime","onMessage","addListener","message","sender","sendResponse","formData","data"],"sourceRoot":""}