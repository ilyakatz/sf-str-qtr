{"version":3,"file":"static/js/contentscript.7cbbd928.js","mappings":"yBAcA,IAAIA,EAAc,KACdC,EAAc,KACdC,EAA0B,KASvB,SAASC,IAOb,IAsDwBC,EALCC,EAvD1BC,EAAUC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,SACbG,EAAcH,UAAAC,OAAA,EAAAD,UAAA,QAAAE,EACdE,EAAWJ,UAAAC,OAAA,EAAAD,UAAA,QAAAE,EACXG,EAAOL,UAAAC,OAAA,EAAAD,UAAA,QAAAE,EACPI,EAAQN,UAAAC,OAAA,EAAAD,UAAA,QAAAE,EACRK,EAAQP,UAAAC,OAAA,EAAAD,UAAA,QAAAE,EAZRM,QAAQC,IAAI,oBACZd,EAAgBe,OAAOC,OAAuB,eAAEC,SAChDnB,EAAcE,EAAckB,cAAc,QAC1CL,QAAQC,IAAI,gCAsBd,SAA0BV,GACxBS,QAAQC,IAAI,yBACZ,IAAMK,EAAgBnB,EAAckB,cAAc,UAClDC,EAAcC,MAAQhB,EAClBe,EAAcC,QAAUhB,EAC1BS,QAAQC,IAAI,8BAADO,OAA0BF,EAAcC,QAEnDP,QAAQC,IAAI,2CAEhB,CAnBEQ,CAAiBlB,GA8DnB,SAA8BI,GAC5B,IAAIe,EAAW,CACb,EAAG,gBACH,EAAG,aACH,EAAG,iBACH,EAAG,oBAGDC,EAAsBD,EAASf,GACnCK,QAAQC,IAAI,+BAAiCU,GAC7C,IACIC,EADuB1B,EAAY,uCAEhC2B,QAAQ,aACRC,KAAK,UACZF,EAAsBG,IAAIJ,GACtBC,EAAsBG,QAAUL,EAASf,GAC3CK,QAAQC,IAAI,4BAADO,OAAwBb,IAEnCK,QAAQC,IAAI,0CAADO,OAAsCI,EAAsBG,OAE3E,CAjFEC,CAAqBrB,GAwDvB,SAAwBC,GACGV,EAAY,qCAClB2B,QAAQ,aAAaC,KAAK,SAASC,IAAInB,EAC5D,CA1DEqB,CAAerB,GAkDUP,EAjDPQ,EAkDAX,EAAY,oCAClB2B,QAAQ,aAAaC,KAAK,SAASC,IAAI1B,GAPzBC,EA3CPQ,EA4CAZ,EAAY,qCAClB2B,QAAQ,aAAaC,KAAK,SAASC,IAAIzB,GAjBtD,WACEU,QAAQC,IAAI,4BACZ,IACMiB,EADmBjC,EAAYoB,cAAc,mCACZc,cAAcd,cAAc,UAC7De,EAAyBF,EAAcG,iBAAiB,UAC1DC,EAAU,KACdF,EAAuBG,SAAQ,SAACC,GACT,KAAjBA,EAAOjB,QACTe,EAAUE,EAAOjB,MAErB,IACAW,EAAcX,MAAQe,EACtBtB,QAAQC,IAAI,yBAADO,OAAqBc,GAClC,CAxCEG,GAgBF,SAA+B1B,GAC7B,IACM2B,EADevC,EAAc2B,MAAK,SAACa,GAAK,MAAyB,gBAApBA,EAAMC,SAA2B,IAChDT,cAAcd,cAAc,SAChEqB,EAAenB,MAAQR,EACnB2B,EAAenB,QAAUR,EAC3BC,QAAQC,IAAI,4BAADO,OAAwBT,IAEnCC,QAAQC,IAAI,yCAEhB,CAxBE4B,CAAsB9B,GA+EHb,EAAY,2BA7EjC,CCzBA4C,OAAOC,QAAQC,UAAUC,aAEvB,SAACC,EAAmCC,EAAQC,GAC1C,IAAMC,EAAWH,EAAQI,KACzBlD,EACEiD,EAAS,GAAG9C,WACZ8C,EAAS,GAAG1C,eACZ0C,EAAS,GAAGzC,YACZyC,EAAS,GAAGxC,QAAUwC,EAAS,GAAGzC,YAClCyC,EAAS,GAAGvC,SAAWuC,EAAS,GAAGzC,YACnCyC,EAAS,GAAGtC,SAEhB,G","sources":["FilloutForm.js","contentscript.ts"],"sourcesContent":["// Copyright 2023 ilya\n// \n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n// \n//     http://www.apache.org/licenses/LICENSE-2.0\n// \n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nlet formElement = null;\nvar $formJquery = null;\nlet specificFrame: document = null;\n\nfunction setupContext() {\n  console.log(`Updating context`);\n  specificFrame = window.frames[\"ACADialogFrame\"].document;\n  formElement = specificFrame.querySelector(\"form\");\n  console.log(`✅ Updated frame context`);\n}\n\nexport function fillOutForm(\n  typeOfStay = \"Hosted\",\n  currentQuarter,\n  currentYear,\n  checkIn,\n  checkOut,\n  airbnbId\n) {\n  setupContext();\n  updateTypeOfStay(typeOfStay);\n  updateCurrentQuarter(currentQuarter);\n  setCurrentYear(currentYear);\n  updateCheckinDate(checkIn);\n  updateCheckoutDate(checkOut);\n  selectAirbnb();\n  updateAirbnbListingId(airbnbId);\n  submitForm();\n}\n\nfunction updateTypeOfStay(typeOfStay) {\n  console.log(`Updating type of stay`);\n  const selectElement = specificFrame.querySelector('select');\n  selectElement.value = typeOfStay;\n  if (selectElement.value === typeOfStay) {\n    console.log(`✅ Type of stay set to ${selectElement.value}`);\n  } else {\n    console.log(`❌ Type of stay is not set correctly`);\n  }\n}\n\nfunction updateAirbnbListingId(airbnbId) {\n  const labelElement = specificFrame.find((label) => label.innerText === \"Listing ID:\");\n  const listingIdInput = labelElement.parentElement.querySelector(\"input\");\n  listingIdInput.value = airbnbId;\n  if (listingIdInput.value === airbnbId) {\n    console.log(`✅ Listing id set to ${airbnbId}`);\n  } else {\n    console.log(`❌ Listing id is not set correctly`);\n  }\n}\n\nfunction selectAirbnb() {\n  console.log(`Selecting Airbnb service`);\n  const serviceNameLabel = formElement.querySelector('label:contains(\"Service Name:\")');\n  const serviceSelect = serviceNameLabel.parentElement.querySelector(\"select\");\n  const serviceDropdownOptions = serviceSelect.querySelectorAll(\"option\");\n  let service = null;\n  serviceDropdownOptions.forEach((option) => {\n    if (option.value !== \"\") {\n      service = option.value;\n    }\n  });\n  serviceSelect.value = service;\n  console.log(`✅ Service set to ${service}`);\n}\n\nfunction updateCheckoutDate(checkOutDate) {\n  var checkoutDate = $formJquery('label:contains(\"Check Out Date:\")');\n  checkoutDate.parents(\".ACA_Form\").find(\"input\").val(checkOutDate);\n}\n\nfunction updateCheckinDate(checkInDate) {\n  var checkinDate = $formJquery('label:contains(\"Check In Date:\")');\n  checkinDate.parents(\".ACA_Form\").find(\"input\").val(checkInDate);\n}\n\nfunction setCurrentYear(currentYear) {\n  var reportingYearLabel = $formJquery('label:contains(\"Reporting Year:\")');\n  reportingYearLabel.parents(\".ACA_Form\").find(\"input\").val(currentYear);\n}\n\nfunction updateCurrentQuarter(currentQuarter) {\n  var quarters = {\n    1: \"January-March\",\n    2: \"April-June\",\n    3: \"July-September\",\n    4: \"October-December\",\n  };\n\n  var currentQuarterValue = quarters[currentQuarter];\n  console.log(\"Updating current quarter to \" + currentQuarterValue);\n  var reportingPeriodLabel = $formJquery('label:contains(\"Reporting Period:\")');\n  var reportingPeriodSelect = reportingPeriodLabel\n        .parents(\".ACA_Form\")\n        .find(\"select\");\n  reportingPeriodSelect.val(currentQuarterValue);\n  if (reportingPeriodSelect.val() === quarters[currentQuarter]) {\n    console.log(`✅ listing id set to ${currentQuarter}`);\n  } else {\n    console.log(`❌ listing id is not set correctly ${reportingPeriodSelect.val()}`);\n  }\n}\n\nfunction submitForm() {\n  var submitButton = $formJquery(\"#ctl00_phPopup_btnSubmit\");\n//   submitButton.click(function (res) {\n//     // Check if the click was successful\n//     if (true) {\n//       console.log(`✅ forms submitted`);\n//     } else {\n//       console.log(`❌ form could not be submitted`);\n//     }\n//   });\n//   submitButton.trigger(\"click\");\n}\n\n/* ============= Run the scripts ============ */\n// const currentQuarter = 3;\n// const currentYear = 2023;\n// const airbnbId = \"49043049\";\n// const checkIn = \"08/25/\" + currentYear;\n// const checkOut = \"09/01/\" + currentYear;\n// const typeOfStay = \"Hosted\";\n\n// fillOutForm(\n//   typeOfStay,\n//   currentQuarter,\n//   currentYear,\n//   checkIn,\n//   checkOut,\n//   airbnbId\n// );","// Copyright 2023 ilya\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { fillOutForm } from \"./FilloutForm\";\n\n// @ts-ignore\nchrome.runtime.onMessage.addListener(\n  // @ts-ignore\n  (message: { data: FormDataItem[] }, sender, sendResponse) => {\n    const formData = message.data;\n    fillOutForm(\n      formData[0].typeOfStay,\n      formData[0].currentQuarter,\n      formData[0].currentYear,\n      formData[0].checkIn + formData[0].currentYear,\n      formData[0].checkOut + formData[0].currentYear,\n      formData[0].airbnbId\n    );\n  }\n);\n"],"names":["formElement","$formJquery","specificFrame","fillOutForm","checkInDate","checkOutDate","typeOfStay","arguments","length","undefined","currentQuarter","currentYear","checkIn","checkOut","airbnbId","console","log","window","frames","document","querySelector","selectElement","value","concat","updateTypeOfStay","quarters","currentQuarterValue","reportingPeriodSelect","parents","find","val","updateCurrentQuarter","setCurrentYear","serviceSelect","parentElement","serviceDropdownOptions","querySelectorAll","service","forEach","option","selectAirbnb","listingIdInput","label","innerText","updateAirbnbListingId","chrome","runtime","onMessage","addListener","message","sender","sendResponse","formData","data"],"sourceRoot":""}